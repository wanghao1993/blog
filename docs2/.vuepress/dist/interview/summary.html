<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面试总结 | 天上的月亮</title>
    <meta name="description" content="我的个人博客">
    <link rel="stylesheet" href="/assets/style.106e1cbf.css">
    <link rel="modulepreload" href="/assets/Home.0ecd154b.js">
    <link rel="modulepreload" href="/assets/app.76bb8ed5.js">
    <link rel="modulepreload" href="/assets/interview_summary.md.db326b7d.lean.js">
    
    <meta name="twitter:title" content="面试总结 | 天上的月亮">
  <meta property="og:title" content="面试总结 | 天上的月亮">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="天上的月亮, back to home" data-v-675d8756 data-v-cc01ef16><!----> 天上的月亮</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/interview/" data-v-b8818f8c>面经 <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/interview/" data-v-b8818f8c>面经 <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item active" href="/interview/summary">面试总结一</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#css相关">CSS相关</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_1-怎么样能够使得元素看不见？">1.怎么样能够使得元素看不见？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2-水平垂直居中的方式">2.水平垂直居中的方式</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_3-使用一个div实现一个肉眼看起来的是一个立方体（显示404可以刷新一下）">3.使用一个div实现一个肉眼看起来的是一个立方体（显示404可以刷新一下）</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-实现逐帧动画">4.实现逐帧动画</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_5-png-jpg-webp-gif有什么区别？">5.png,jpg,webp,gif有什么区别？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_6-flex和grid布局相关，这部分大搞复习一下即可">6.Flex和grid布局相关，这部分大搞复习一下即可</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#总结">总结</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#js相关">JS相关</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_1-原型和原型链，继承">1.原型和原型链，继承</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2-闭包">2.闭包</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_3-事件循环">3.事件循环</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-js代码是如何执行的">4.js代码是如何执行的</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_5-作用域链是如何形成的">5.作用域链是如何形成的</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_6-普通函数和箭头函数的区别">6.普通函数和箭头函数的区别</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_7-深拷贝">7.深拷贝</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_8-手写promise">8.手写Promise</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_9-手写promise-allsettled和all">9.手写Promise.allSettled和All</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_10-以下代码输出什么？">10.以下代码输出什么？</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="面试总结" tabindex="-1">面试总结 <a class="header-anchor" href="#面试总结" aria-hidden="true">#</a></h1><p>最近在面试，也面了那么几家公司，有大厂，小厂等公司，我在这里总结一下。</p><p>大概可以分为以下几部分：</p><ul><li>CSS</li><li>JS</li><li>网络</li><li>算法</li><li>安全</li><li>性能优化</li><li>工程化</li></ul><h2 id="css相关" tabindex="-1">CSS相关 <a class="header-anchor" href="#css相关" aria-hidden="true">#</a></h2><h3 id="_1-怎么样能够使得元素看不见？" tabindex="-1">1.怎么样能够使得元素看不见？ <a class="header-anchor" href="#_1-怎么样能够使得元素看不见？" aria-hidden="true">#</a></h3><blockquote><p>1.display: none 2.visibility: hidden 3.opacity: 0 4.z-index: -1</p></blockquote><pre><code>注意其中的区别，那些会导致页面结构改变。
</code></pre><h3 id="_2-水平垂直居中的方式" tabindex="-1">2.水平垂直居中的方式 <a class="header-anchor" href="#_2-水平垂直居中的方式" aria-hidden="true">#</a></h3><blockquote><p>不做解释</p></blockquote><h3 id="_3-使用一个div实现一个肉眼看起来的是一个立方体（显示404可以刷新一下）" tabindex="-1">3.使用一个div实现一个肉眼看起来的是一个<a href="/demo/divtosqu.html">立方体</a>（显示404可以刷新一下） <a class="header-anchor" href="#_3-使用一个div实现一个肉眼看起来的是一个立方体（显示404可以刷新一下）" aria-hidden="true">#</a></h3><blockquote><p>这里主要考察的是 <em>transform</em></p></blockquote><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>box<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css"><pre><code><span class="token selector">#box</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skew</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">,</span> 0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#box::after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skewX</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#box::before</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skewY</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-实现逐帧动画" tabindex="-1">4.实现逐帧动画 <a class="header-anchor" href="#_4-实现逐帧动画" aria-hidden="true">#</a></h3><blockquote><p>首先什么是逐帧动画？可能不经常做动画的同学都不是很了解这个概念。 <strong>是一种动画技术，其原理即将每帧不同的图像连续播放，从而产生动画效果。</strong> 例如连续翻动漫画，速度足够快，就像形成动画一样。</p></blockquote><blockquote><p>使人感觉比较流畅的动画，大概是一秒钟60帧，那么就意味，每16.67ms至少就切换一次图像，这样才能达到流畅的视觉效果，否则会觉得卡顿。</p></blockquote><p><a href="/demo/animations.html">这是我实现的</a>，显示404可以刷新一下</p><blockquote><p>这里要复习的点就是 animation的一些参数，这里的关键点在于 <em>steps</em>函数</p></blockquote><h3 id="_5-png-jpg-webp-gif有什么区别？" tabindex="-1">5.png,jpg,webp,gif有什么区别？ <a class="header-anchor" href="#_5-png-jpg-webp-gif有什么区别？" aria-hidden="true">#</a></h3><p>参考一下这个文章: <a href="https://juejin.cn/post/7011915506298912798#heading-18" target="_blank" rel="noopener noreferrer">常见图片格式：bmp、jpg、jpeg、gif、png 的区别；十六进制查看图片文件等图片知识积累</a><strong>留个疑问：矢量图为什么不会模糊</strong></p><h3 id="_6-flex和grid布局相关，这部分大搞复习一下即可" tabindex="-1">6.Flex和grid布局相关，这部分大搞复习一下即可 <a class="header-anchor" href="#_6-flex和grid布局相关，这部分大搞复习一下即可" aria-hidden="true">#</a></h3><p>可参考<a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html?utm_source=tuicool" target="_blank" rel="noopener noreferrer">Flex 布局教程：语法篇</a></p><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-hidden="true">#</a></h3><p>中小公司问css问的不多，大厂会问的比较多，且可能是我们平时不注意的，不可忽视啊，哎，难顶啊，哈哈～</p><h2 id="js相关" tabindex="-1">JS相关 <a class="header-anchor" href="#js相关" aria-hidden="true">#</a></h2><h3 id="_1-原型和原型链，继承" tabindex="-1">1.原型和原型链，继承 <a class="header-anchor" href="#_1-原型和原型链，继承" aria-hidden="true">#</a></h3><blockquote><p>涉及的点：1.概念 2.各个继承的优缺点等等，我之前写过一点点 <a href="https://juejin.cn/post/6844904197859573768#heading-16" target="_blank" rel="noopener noreferrer">对象的一些基础知识</a></p></blockquote><h3 id="_2-闭包" tabindex="-1">2.闭包 <a class="header-anchor" href="#_2-闭包" aria-hidden="true">#</a></h3><blockquote><p>1.概念 2.应用 概念：一个函数，能够访问外层函数的变量，例如：</p></blockquote><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;Mozilla&quot;</span><span class="token punctuation">;</span> <span class="token comment">// name 是一个被 init 创建的局部变量</span>
    <span class="token keyword">function</span> <span class="token function">displayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// displayName() 是内部函数，一个闭包</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用了父函数中声明的变量</span>
    <span class="token punctuation">}</span>
    <span class="token function">displayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以参考这一篇文章：<a href="https://juejin.cn/post/6937469222251560990#heading-0" target="_blank" rel="noopener noreferrer">JS 闭包经典使用场景和含闭包必刷题</a></p><h3 id="_3-事件循环" tabindex="-1">3.事件循环 <a class="header-anchor" href="#_3-事件循环" aria-hidden="true">#</a></h3><p>我之前看vue源码时候说到的<a href="https://juejin.cn/post/7002590321720688654#heading-3" target="_blank" rel="noopener noreferrer">事件循环</a></p><h3 id="_4-js代码是如何执行的" tabindex="-1">4.js代码是如何执行的 <a class="header-anchor" href="#_4-js代码是如何执行的" aria-hidden="true">#</a></h3><p>有兴趣的可以翻一下ECMA 262，主要分为创建阶段和执行阶段，各干了什么事情。</p><h3 id="_5-作用域链是如何形成的" tabindex="-1">5.作用域链是如何形成的 <a class="header-anchor" href="#_5-作用域链是如何形成的" aria-hidden="true">#</a></h3><p><a href="https://juejin.cn/post/6844903797135769614#heading-0" target="_blank" rel="noopener noreferrer">深入理解JavaScript作用域和作用域链</a></p><h3 id="_6-普通函数和箭头函数的区别" tabindex="-1">6.普通函数和箭头函数的区别 <a class="header-anchor" href="#_6-普通函数和箭头函数的区别" aria-hidden="true">#</a></h3><pre><code>1.箭头函数没有this

2.箭头函数没有prototype

3.无法修改箭头函数中的this指向

4.没有arguments

5.=&gt;无法new，且不支持重命名函数参数
</code></pre><h3 id="_7-深拷贝" tabindex="-1">7.深拷贝 <a class="header-anchor" href="#_7-深拷贝" aria-hidden="true">#</a></h3><pre><code>懂得都懂，主要要注意特殊类型的处理，例如Date, Function, RegExp，循环引用等等
</code></pre><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">isObject</span> <span class="token operator">=</span> <span class="token parameter">o</span> <span class="token operator">=&gt;</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;[object Object]&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">isArray</span> <span class="token operator">=</span> <span class="token parameter">o</span> <span class="token operator">=&gt;</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;[object Array]&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">isDate</span> <span class="token operator">=</span> <span class="token parameter">o</span> <span class="token operator">=&gt;</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;[object Date]&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">isNull</span> <span class="token operator">=</span> <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o <span class="token operator">===</span> <span class="token keyword">null</span>
<span class="token keyword">function</span> <span class="token function">deepClone</span> <span class="token punctuation">(</span><span class="token parameter">Obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Obj <span class="token operator">!==</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Obj
    <span class="token keyword">let</span> cloneObj <span class="token operator">=</span> <span class="token function">isArray</span><span class="token punctuation">(</span>Obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> Obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>Obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isArray</span><span class="token punctuation">(</span>Obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cloneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>Obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDate</span><span class="token punctuation">(</span>Obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cloneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            cloneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> Obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> cloneObj
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-手写promise" tabindex="-1">8.手写Promise <a class="header-anchor" href="#_8-手写promise" aria-hidden="true">#</a></h3><p>可以看这道题<a href="https://juejin.cn/post/6945319439772434469" target="_blank" rel="noopener noreferrer">从一道让我失眠的 Promise 面试题开始，深入分析 Promise 实现细节</a></p><h3 id="_9-手写promise-allsettled和all" tabindex="-1">9.手写Promise.allSettled和All <a class="header-anchor" href="#_9-手写promise-allsettled和all" aria-hidden="true">#</a></h3><div class="language-js"><pre><code>Promise<span class="token punctuation">.</span>allSettled <span class="token operator">=</span> Promise<span class="token punctuation">.</span>allSettled <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;arguments must be an array&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> resolvedCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> promiseNum <span class="token operator">=</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">var</span> resolvedValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>promiseNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> promiseNum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
                    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        resolvedCounter<span class="token operator">++</span><span class="token punctuation">;</span>
                        resolvedValues<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>resolvedCounter <span class="token operator">==</span> promiseNum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>resolvedValues<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        resolvedCounter<span class="token operator">++</span><span class="token punctuation">;</span>
                        resolvedValues<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> reason<span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>resolvedCounter <span class="token operator">==</span> promiseNum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 第二中用All实现</span>
Promise<span class="token punctuation">.</span><span class="token function-variable function">allSettled</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promises<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;fulfilled&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> res <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;rejected&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">reason</span><span class="token operator">:</span> error <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> len <span class="token operator">=</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">,</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> count <span class="token operator">=</span> len
    <span class="token keyword">if</span> <span class="token punctuation">(</span>len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> promise <span class="token operator">=</span> promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    res<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> response
 
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">--</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                    
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_10-以下代码输出什么？" tabindex="-1">10.以下代码输出什么？ <a class="header-anchor" href="#_10-以下代码输出什么？" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
 <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> 
 <span class="token punctuation">}</span><span class="token punctuation">)</span> 
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 
 <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> 
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>这里涉及到事件循环和Promise的原理。</p><ol><li>首先console.log(1)先执行</li><li>然后抛出了一个错误，在下一个then中被reject掉了，所以会执行console.log(4)，而catch不会再执行了</li><li>console.log(6)</li><li>console.log(1)</li></ol></blockquote></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"goodnight_index.md\":\"0c9fe89b\",\"index.md\":\"d8241f7d\",\"interview_index.md\":\"893ac27e\",\"interview_summary.md\":\"db326b7d\",\"typescript_问题.md\":\"5592050e\"}")</script>
    <script type="module" async src="/assets/app.76bb8ed5.js"></script>
    
  </body>
</html>